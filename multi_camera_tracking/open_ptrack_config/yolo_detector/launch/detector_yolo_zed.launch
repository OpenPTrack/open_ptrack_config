<?xml version="1.0"?>
<launch>
    <arg name="sensor_name" default="zed_head" /> 
    <arg name="training_set" default="$(optenv OPT_OBJECT_TRAINING coco)" />
    <arg name="yolo_based_person_detection" default="false" />

    <!-- Launch object detection node -->
    <node pkg="yolo_detector" type="open_ptrack_yolo_object_detector_node"
        name="$(arg sensor_name)_yolo_detector_node_$(arg yolo_based_person_detection)" output="screen" respawn="false">

        <param name="yolo_based_people_tracking_tracking"    value="$(arg yolo_based_person_detection)" />
        <param name="depth_image_topic"             value="/$(arg sensor_name)/zed/zed_node/depth/depth_registered"/>
        <param name="rgb_image_topic"               value="/$(arg sensor_name)/zed/zed_node/rgb/image_rect_color"/>
        <param name="output_topic"                  value="/detector/detections"  if="$(arg yolo_based_person_detection)"/>
        <param name="output_topic"                  value="/objects_detector/detections"  unless="$(arg yolo_based_person_detection)"/>
        <param name="camera_info_topic"             value="/$(arg sensor_name)/zed/zed_node/rgb/camera_info"/>
        <param name="thresh"                        value="0.25"/>  
        <param name="heir_thresh"                   value="0.5"/>  
        <param name="data_cfg"                      value="$(find yolo_detector)/darknet_opt/cfg/$(arg training_set).data"/>
        <param name="yolo_cfg"                      value="$(find yolo_detector)/darknet_opt/cfg/$(arg training_set)-test.cfg"/>
        <param name="weight_file"                   value="$(find yolo_detector)/darknet_opt/$(arg training_set).weights"/>
        <param name="name_file"                     value ="$(find yolo_detector)/data/$(arg training_set).names" />
        <param name="encoding_type"                 value="32FC1"/>
        <param name="in_mm"                         value="0"/>
    
        <param name="root"                          value="$(find yolo_detector)"/>

    </node>

</launch>
